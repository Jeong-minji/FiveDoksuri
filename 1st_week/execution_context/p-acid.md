# 실행 컨텍스트

## 실행 컨텍스트의 정의

---

- **실행 컨텍스트**란 ECMAScript 스펙에 따르면 실행 컨텍스트를 **\*실행 가능한 코드**를 형상화하고 구분하는 추상적인 개념이라고 정의한다.
  > 일반적으로 실행 가능한 코드를 **전역 코드**와 **함수 내 코드**로 정의한다.
- 실행 컨텍스트는 **실행 가능한 코드가 실행되기 위해 필요한 환경**이라고 간단하게 말할 수 있다.
- 비유해서 **코드의 실행**이 **요리를 하는 것**이라고 말한다면, **실행 컨텍스트**는 **요리를 위해 준비한 재료들**이라고 말할 수 있을 것 같다!
- 자바스크립트 **코드가 실행되기 위해 필요한 것**들은 다음과 같다.
  - **변수** : 전역 변수, 지역 변수, 매개 변수, 객체의 프로퍼티
  - **함수 선언**
  - **변수의 유효 범위(Scope)**
  - **`this`**

```javascript
// 예제 코드 : 이어지는 내용 설명에 계속 사용할 예정
var x = "xxx";

function foo() {
  var y = "yyy";

  function bar() {
    var z = "zzz";
    console.log(x + y + z);
  }
  bar();
}
foo();
```

- 코드가 실행되면 실행 컨텍스트 **\*스택(`stack`)** 이 생성되고 소멸된다.
  > **스택(`stack`)**: LIFO(Last In First Out, 후입 선출)의 나열 구조
- 보편적인 순서는 다음과 같이 진행된다.
  - 전역 코드로 컨트롤 진입 → 전역 실행 컨텍스트 생성 → 함수 코드로 컨트롤 이동 → 함수 실행 컨텍스트 생성(함수 내 함수까지 반복) → 함수 실행 → 함수 실행 컨텍스트 파기(소멸) → 직전의
    실행 컨텍스트에 컨트롤 반환

</br>

## 살행 컨텍스트의 구조(3가지 객체)

---

- 추상적인 개념의 실행 컨텍스트이지만, 물리적으로 객체의 형태를 가지며 다음의 3가지 프로퍼티를 소유한다.
  - **변수 객체(VO / Variable Object)**
  - **스코프 체인(SC / Scope Chain)**
  - **this value**

</br>

### 변수 객체(VO / Variable Object)

- 변수 객체는 **다른 객체들**을 가리키며 **변수, 함수, 매개변수(parameter) 및 인수 정보(arguments)** 등이 이에 해당한다.
- 변수 객체는 전역 컨텍스트의 경우 **전역 객체(GO)** 를 가리키고, 함수 컨텍스트의 경우 **활성 객체(AO)** 를 가리킨다.
- 활성 객체의 경우 `arguments object` 가 추가된다.

</br>

### 스코프 체인(SC / Scope Chain)

- 참조 가능한 변수, 선언 등의 정보를 갖는 **전역 객체(GO) 또는 활성 객체(AO)들의 리스트**이다.
  - 정확히 말하자면 변수를 검색하는 메커니즘이다. 변수가 아닌 객체 프로퍼티를 검색하는 메커니즘은 프로토타입 체인(Prototype Chain)이다.
  - 스코프 체인을 통해 렉시컬 스코프를 파악한다.
- 리스트는 **현재 실행 중인 컨텍스트 → 전역 컨텍스트 순**으로 진행된다.
- 검색에 실패하면 Reference Error를 발생시킨다.

</br>

### this value

- this 값이 할당되며 이는 함수 호출 패턴에 의해 결정된다.

</br>
